(this["webpackJsonpdustbin-proto-dnd-reordering-nested-column-to-diff-parent-forked-modified"]=this["webpackJsonpdustbin-proto-dnd-reordering-nested-column-to-diff-parent-forked-modified"]||[]).push([[0],{48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(25),r=a.n(c),l=a(2),s=a(3),o=a(26),d=a.n(o),p=a(52),h=a(9),m=a.n(h),u="supersection",z="section",b="subsection",g="component",y="canvas",v=12,f=[u,z,b,g],O=[{id:m.a.generate(),type:g,component:{type:"Input",content:"Some input"}}],E=["sidebarItem",g,z,b],D=function(e){var t=e.style,a=e.data,n=e.onDrop,c=e.isLast,r=e.className,o=e.availableSize,h=Object(p.a)({accept:E,drop:function(e,t){n(a,e)},canDrop:function(e,t){var n=a.path,i=e.path;return!(o<1)&&(!i||!(i.length<n.length)&&(JSON.stringify([].concat(Object(l.a)(i.slice(0,-1)),[parseInt(i.slice(-1))+1]))!==JSON.stringify(n)&&i!==n))},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),m=Object(s.a)(h,2),u=m[0],z=u.isOver,b=u.canDrop,g=m[1],y=z&&b;return i.a.createElement("div",{style:t,className:d()("dropZone",{active:y,isLast:c},r),ref:g,availablesize:o})},j=a(4),S=a(53),N=function(e){var t=e.data,a=Object(S.a)({item:Object(j.a)(Object(j.a)({},t),{},{origin:"new"}),collect:function(e){return{opacity:e.isDragging()?.4:1}}}),n=Object(s.a)(a,2),c=n[0].opacity,r=n[1];return i.a.createElement("div",{className:"sideBarItem",ref:r,style:{opacity:c}},t.component.type)},C=function(e){var t=e.data,a=e.path,c=e.subSectionSize,r=Object(n.useRef)(null),l=Object(S.a)({item:{type:g,id:t.id,path:a,origin:y},collect:function(e){return{isDragging:e.isDragging()}}}),o=Object(s.a)(l,2),d=o[0].isDragging?0:1;return(0,o[1])(r),i.a.createElement("div",{ref:r,style:{opacity:d,flex:t.size/c},className:"component draggable"},i.a.createElement("div",null,t.id," ",t.size))},k=function(e,t,a){var n=function e(t,a,n){for(;t.type!==a;){var i=f.indexOf(t.type);e(t={type:f[i-1],id:m.a.generate(),children:[Object(j.a)(Object(j.a)({},t),{},{size:n})]},a)}return t=Object(j.a)(Object(j.a)({},t),{},{size:n})},i=function e(i,c,r){if(c!=r){var s=i[t.path[c]].children;i[t.path[c]].size;return i[t.path[c]].children=e(s,++c,r),i}var o,d,p,h=t.availableSize;return 1==t.modify?function(e,t,a){var n=e.slice(0,t)[0],i=e.slice(t)[0];return n?(a.size=n.size=n.size/2,[n,a]):(a.size=i.size=i.size/2,[a,i])}(i,t.path[t.path.length-1],n(a,t.type,h)):(o=i,d=t.path[t.path.length-1],p=n(a,t.type,h),[].concat(Object(l.a)(o.slice(0,d)),[p],Object(l.a)(o.slice(d))))};return"new"===a.origin||(e=function e(t,n,i){return n!=i?(t[a.path[n]].children=e(t[a.path[n]].children,++n,i),t):(c=t,r=a.path[a.path.length-1],[].concat(Object(l.a)(c.slice(0,r)),Object(l.a)(c.slice(r+1))));var c,r}(e,0,a.path.length-1)),i(e,0,t.path.length-1)},x=function(e){return e.size-e.children.reduce((function(e,t){return e+t.size}),0)},L={},M=function(e){var t=e.data,a=e.components,c=e.handleDrop,r=e.path,o=e.sectionSize,d=Object(n.useRef)(null),p=x(t),h=Object(S.a)({item:{type:b,id:t.id,children:t.children,path:r,origin:y},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(s.a)(h,2),u=m[0].isDragging?0:1;(0,m[1])(d);var z=0,v=!1;return i.a.createElement("div",{ref:d,style:Object(j.a)(Object(j.a)({},L),{},{opacity:u,flex:t.size/o}),className:"base draggable subSection"},i.a.createElement("div",{className:"subSectionLabel"},t.id," ",t.size),i.a.createElement("div",{className:"componentContainer"},t.children.map((function(e,n){v=!1;var s=[].concat(Object(l.a)(r),[n]),o=[].concat(Object(l.a)(r),[n+1]);return(z+=e.size)>t.size&&(z-=t.size,v=!0),i.a.createElement(i.a.Fragment,{key:e.id},1==v&&i.a.createElement(i.a.Fragment,null,i.a.createElement(D,{data:{path:s,childrenCount:t.children.length,type:g,availableSize:Math.max(p,2)},onDrop:c,availableSize:Math.max(p,2),className:"horizontalDrag"}),i.a.createElement("div",{className:"separator"})),i.a.createElement(D,{data:{path:s,childrenCount:t.children.length,type:g,availableSize:Math.max(p,2)},onDrop:c,availableSize:Math.max(p,2),className:"horizontalDrag"}),e.size>3&&i.a.createElement(D,{data:{path:s,childrenCount:t.children.length,type:g,modify:!0,availableSize:e.size/2},onDrop:c,availableSize:e.size/2,className:"horizontalDrag"}),function(e,t,n){return i.a.createElement(C,{key:e.id,data:e,components:a,path:t,subSectionSize:n})}(e,s,t.size),e.size>3&&i.a.createElement(D,{data:{path:o,childrenCount:t.children.length,type:g,modify:!0,availableSize:e.size/2},onDrop:c,availableSize:e.size/2,className:"horizontalDrag"}))})),i.a.createElement(D,{style:{flex:p/t.size},data:{path:[].concat(Object(l.a)(r),[t.children.length]),childrenCount:t.children.length,type:g,availableSize:Math.max(p,2)},onDrop:c,availableSize:Math.max(p,2),className:"horizontalDrag",isLast:!0})))},w=function(e){var t=e.data,a=e.components,c=e.handleDrop,r=e.path,o=Object(n.useRef)(null),d=x(t),p=Object(S.a)({item:{type:z,id:t.id,size:t.size,children:t.children,path:r,origin:y},collect:function(e){return{isDragging:e.isDragging()}}}),h=Object(s.a)(p,2),m=h[0].isDragging?0:1;(0,h[1])(o);return i.a.createElement("div",{ref:o,style:{opacity:m,flex:t.size/v},className:"base draggable section"},i.a.createElement("div",{className:"sectionLabel"},t.id," ",t.size),i.a.createElement("div",{className:"subSectionContainer"},t.children.map((function(e,n){var s=[].concat(Object(l.a)(r),[n]);return i.a.createElement(i.a.Fragment,{key:e.id},i.a.createElement(D,{data:{path:s,childrenCount:t.children.length,type:b,availableSize:d},onDrop:c,availableSize:d,className:"horizontalDrag"}),function(e,t,n){return i.a.createElement(M,{key:e.id,data:e,components:a,handleDrop:c,path:t,sectionSize:n})}(e,s,t.size))})),i.a.createElement(D,{style:{flex:d/t.size},data:{path:[].concat(Object(l.a)(r),[t.children.length]),childrenCount:t.children.length,type:b,availableSize:d},onDrop:c,availableSize:d,className:"horizontalDrag",isLast:!0})))},F={layout:[{type:u,size:12,id:"supersection0",children:[{type:z,size:8,id:"section0",children:[{type:b,size:4,id:"subsection0",children:[{size:2,type:g,id:"component0"},{size:2,type:g,id:"component1"}]},{type:b,size:4,id:"subsection1",children:[{size:4,type:g,id:"component2"}]}]},{type:z,size:4,id:"section1",children:[{type:b,size:4,id:"subsection2",children:[{size:2,type:g,id:"component3"},{size:2,type:g,id:"component4"}]}]}]},{type:u,size:12,id:"supersection0",children:[{type:z,size:8,id:"section0",children:[{type:b,size:4,id:"subsection0",children:[{size:2,type:g,id:"component0"},{size:2,type:g,id:"component1"}]},{type:b,size:4,id:"subsection1",children:[{size:2,type:g,id:"component2"}]}]},{type:z,size:4,id:"section1",children:[{type:b,size:4,id:"subsection2",children:[{size:2,type:g,id:"component3"},{size:2,type:g,id:"component4"}]}]}]},{type:u,size:12,id:"supersection0",children:[{type:z,size:6,id:"section0",children:[{type:b,size:4,id:"subsection0",children:[{size:2,type:g,id:"component0"},{size:2,type:g,id:"component1"}]},{type:b,size:2,id:"subsection1",children:[{size:2,type:g,id:"component2"}]}]},{type:z,size:6,id:"section1",children:[{type:b,size:6,id:"subsection2",children:[{size:3,type:g,id:"component3"},{size:3,type:g,id:"component4"}]}]}]}]},I=function(){var e=F.layout,t=Object(n.useState)(e),a=Object(s.a)(t,2),c=a[0],r=a[1],o=Object(n.useCallback)((function(e,t){console.log(e),console.log(t),r(Object(l.a)(k(c,e,t)))}),[c]);return i.a.createElement("div",{className:"body"},i.a.createElement("div",{className:"sideBar"},Object.values(O).map((function(e,t){return i.a.createElement(N,{key:e.id,data:e})}))),i.a.createElement("div",{className:"pageContainer"},i.a.createElement("div",{className:"page"},c.map((function(e,t){var a=v;return i.a.createElement(i.a.Fragment,null,i.a.createElement(D,{data:{path:[t],childrenCount:e.length,type:u,availableSize:v},onDrop:o,availableSize:v,path:[t]}),i.a.createElement("div",{className:"sectionContainer"},e.children.map((function(e,n){return a-=e.size,i.a.createElement(i.a.Fragment,{key:e.id},function(e,t){return i.a.createElement(w,{key:e.id,data:e,handleDrop:o,path:t})}(e,[t,n]))})),a>0&&i.a.createElement(D,{style:{flexGrow:a/v},data:{path:[t,e.children.length],childrenCount:e.children.length,type:z,availableSize:a},className:"horizontalDrag",onDrop:o,availableSize:a,isLast:!0})))})),i.a.createElement(D,{data:{path:[c.length],childrenCount:c.length,type:u,availableSize:v},onDrop:o,availableSize:v,isLast:!0}))))},J=a(51),B=a(28);a(48);function R(){return i.a.createElement("div",{className:"App"},i.a.createElement(J.a,{backend:B.a},i.a.createElement(I,null)))}var A=document.getElementById("root");r.a.render(i.a.createElement(R,null),A)}},[[49,1,2]]]);
//# sourceMappingURL=main.1f0631dd.chunk.js.map